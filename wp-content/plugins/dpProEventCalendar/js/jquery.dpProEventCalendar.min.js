!function(e){function t(t,a){this.calendar=e(t),this.eventDates=e(".dp_pec_date",this.calendar),this.settings=e.extend({},e.fn.dpProEventCalendar.defaults,a),this.orig_settings=a,this.category="",this.location="",this.cache=new Array,this.cache_param="",this.view="monthly",this.grid=void 0,this.monthlyView="calendar",this.type="calendar",this.defaultDate=0,this.startTime=0,this.init()}t.prototype={init:function(){var t=this;if(t.init_tooltips(),e(document).on("click",".dpProEventCalendar_close_modal_btn",function(t){e(".dpProEventCalendarModal, .dpProEventCalendarOverlay").fadeOut("fast"),e("body, html").css("overflow","")}),"single_page"==t.settings.type)return t.create_overlay(),t.create_book_event(),t.create_event_modal(!0),t.make_event_form_work(t.calendar),t.open_options(),t.remove_event(),t.more_dates(),void t.starts_in();if(t.view=t.settings.view,t.defaultDate=t.settings.defaultDate,"compact"==t.settings.type&&(t.view="monthly"),"carousel-2"!=t.settings.type&&"carousel-3"!=t.settings.type||(t.settings.type="carousel"),"slider-2"!=t.settings.type&&"slider-3"!=t.settings.type||(t.settings.type="slider"),"countdown"==t.settings.type&&e(".dp_pec_countdown_event",t.calendar).length&&e(".dp_pec_countdown_event",t.calendar).each(function(){var a=new Date(e(this).data("countdown-year"),e(this).data("countdown-month")-1,e(this).data("countdown-day"),e(this).data("countdown-hour"),e(this).data("countdown-minute")),n=new Date(e(this).data("current-year"),e(this).data("current-month")-1,e(this).data("current-day"),e(this).data("current-hour"),e(this).data("current-minute"),e(this).data("current-second"));t._setup_countdown(a,n,this,e(this).data("countdown-tzo"))}),e(t.calendar).not(".dp_pec_compact_wrapper").addClass(t.settings.skin),t._makeResponsive(),t.create_overlay(),t.create_book_event(),e(".pec_upcoming_layout",t.calendar).length&&(t.create_isotope(".pec_upcoming_layout"),t.create_event_modal(!0)),e(t.calendar).on("click",".prev_month",function(e){t._prevMonth(t)}),t.settings.dateRangeStart&&t.settings.dateRangeStart.substr(0,7)==t.settings.actualYear+"-"+t._str_pad(t.settings.actualMonth,2,"0","STR_PAD_LEFT")&&!t.settings.isAdmin&&e(".prev_month",t.calendar).hide(),e(t.calendar).on("click",".next_month",function(e){t._nextMonth(t)}),t.settings.dateRangeEnd&&t.settings.dateRangeEnd.substr(0,7)==t.settings.actualYear+"-"+t._str_pad(t.settings.actualMonth,2,"0","STR_PAD_LEFT")&&!t.settings.isAdmin&&e(".next_month",t.calendar).hide(),e(".prev_day",t.calendar).click(function(e){t._prevDay(t)}),e(".next_day",t.calendar).click(function(e){t._nextDay(t)}),e(".prev_week",t.calendar).click(function(e){t._prevWeek(t)}),e(".next_week",t.calendar).click(function(e){t._nextWeek(t)}),e(".pec_today",t.calendar).click(function(e){t._today(t)}),"add-event"==t.settings.type&&(t.make_event_form_work(t.calendar),t.create_datepicker(t.calendar)),"grid-upcoming"==t.settings.type&&e(t.calendar).on("click",".dp_pec_grid_event",function(){e(".dp_pec_grid_link_image",e(this))[0].click()}),"accordion"==t.settings.type&&(t.create_event_modal(!0),t.make_event_form_work(t.calendar),t.accordion_month_dropdown()),"list-author"==t.settings.type&&(t.create_event_modal(!0),t.make_event_form_work(t.calendar)),"yearly"==t.settings.type&&(e(t.calendar).on("click",".dp_pec_filter",function(a){a.preventDefault(),t.toggle_filter(e(this))}),e(t.calendar).on("click",".next_year, .prev_year",function(a){a.preventDefault();var n=e("h3",e(this).closest(".dp_pec_yearly_header"));return e(this).hasClass("next_year")?(n.html(parseInt(t.settings.actualYear)+1),t.settings.actualYear++):(n.html(parseInt(t.settings.actualYear)-1),t.settings.actualYear--),t._changeYear(),!1}),e(t.calendar).on("click",".dp_pec_yearly_calendar_month_date.pec_has_events",function(t){var a=e(this).closest(".dp_pec_yearly_calendar_month_date").offset(),n=e(this).find(".pec_yearly_eventsPreview");n.removeClass("previewRight"),a&&a.left+n.outerWidth()>=e(window).width()&&n.addClass("previewRight"),n.toggle()}),e(document).mouseup(function(a){e(".pec_yearly_eventsPreview",t.calendar).hide()})),"carousel"==t.settings.type){var a=e(".dp_pec_carousel_item",t.calendar);const n=parseInt(t.settings.columns);e(t.calendar).on("click",".dp_pec_carousel_nav a",function(d){d.preventDefault();const s=e(".dp_pec_carousel_active",t.calendar).data("pec-nav");e(".dp_pec_carousel_nav a",t.calendar).removeClass("dp_pec_carousel_active"),e(this).addClass("dp_pec_carousel_active");const _=e(this).data("pec-nav"),i=_*n,c=(_+1)*n;(e(".dp_pec_carousel_item_visible",t.calendar).removeClass("dp_pec_carousel_item_visible dp_pec_carousel_item_animation_left dp_pec_carousel_item_animation_right"),_<s)?a.slice(c-n,c).addClass("dp_pec_carousel_item_visible dp_pec_carousel_item_animation_right"):a.slice(i,i+n).addClass("dp_pec_carousel_item_visible dp_pec_carousel_item_animation_left")}),t.create_event_modal(!0),t.make_event_form_work(t.calendar)}if("slider"==t.settings.type){var n=e(".dp_pec_slider_item",t.calendar),d=e(t.calendar).hasClass("dp_pec_slider_loop");e(t.calendar).on("click",".dp_pec_slider_prev",function(){e(".dp_pec_slider_next",t.calendar).show();var a=e(".dp_pec_slider_item_visible",t.calendar),s=a.prev();d?void 0===s[0]&&(s=n.last()):s.is(":first-child")&&e(this).hide(),s.addClass("dp_pec_slider_item_visible dp_pec_slider_item_animation_right"),a.removeClass("dp_pec_slider_item_visible dp_pec_slider_item_animation_left dp_pec_slider_item_animation_right")}),e(t.calendar).on("click",".dp_pec_slider_next",function(){e(".dp_pec_slider_prev",t.calendar).show();var a=e(".dp_pec_slider_item_visible",t.calendar),s=a.next();d?void 0===s[0]&&(s=n.first()):s.is(":last-child")&&e(this).hide(),s.addClass("dp_pec_slider_item_visible dp_pec_slider_item_animation_left"),a.removeClass("dp_pec_slider_item_visible dp_pec_slider_item_animation_left dp_pec_slider_item_animation_right")}),t.create_event_modal(!0),t.make_event_form_work(t.calendar)}if("timeline"==t.settings.type){var s=0;if(t.isMobile()){var _,i=!1;e(t.calendar).pec_touch({trackDocument:!0,dragThreshold:0,dragDelay:0,delegateSelector:".dp_pec_timeline_drag",tapAndHoldDelay:0,preventDefault:{drag:!1}}).on("dragStart tapAndHold",".dp_pec_timeline_drag",function(t){t.stopPropagation();var a=e(this);void 0===_&&(_=a.offset()),i||(i=!0,a.addClass("pec-is-dragging"))}).on("drag",".dp_pec_timeline_drag",function(a,n){a.stopPropagation();var d=e(this),s=n.x-n.exStart-_.left;if(s>0)return e(this).trigger("mouseup"),t.isMobile()||d.animate({left:"-=20"},500),!1;var i=e(this).outerWidth();if(e(this).parent().outerWidth()+-1*s>i)return e(this).trigger("mouseup"),t.isMobile()||d.animate({left:"+=50"},500),!1;d.css("left",s+"px")}).on("dragEnd tapAndHoldEnd",".dp_pec_timeline_drag",function(t){t.stopPropagation();var a=e(this);i=!1,a.removeClass("pec-is-dragging")})}else e(".dp_pec_timeline_drag",t.calendar).draggable({axis:"x",cancel:".dp_pec_timeline_date_mark, .dp_pec_timeline_date_popup",drag:function(t,a){var n=a.position;n.left<s?"left":n.left>s&&"right",s=n.left,e(this).draggable("option","revert",!1),s>0&&(a.originalPosition.left=-20,e(this).draggable("option","revert",!0).trigger("mouseup"));var d=e(this).outerWidth();e(this).parent().outerWidth()+-1*s>d&&(a.originalPosition.left=s+50,e(this).draggable("option","revert",!0).trigger("mouseup"))},stop:function(){}});e(t.calendar).on("click",".dp_pec_timeline_date_separator",function(a){e(a.target).hasClass("dp_pec_timeline_date_mark")?$elem=e(this).closest(".dp_pec_timeline_date_separator"):$elem=e(this);const n=$elem.hasClass("dp_pec_timeline_date_active");e(".dp_pec_timeline_date_separator",t.calendar).removeClass("dp_pec_timeline_date_active"),n||$elem.addClass("dp_pec_timeline_date_active")})}if("card"==t.settings.type&&e(t.calendar).on("click",".dp_pec_card_event:not(.dp_pec_card_active)",function(){e(".dp_pec_card_event",e(this).parent()).removeClass("dp_pec_card_active"),e(this).addClass("dp_pec_card_active"),e(".dp_pec_card_selected h3",e(this).closest(".dp_pec_card_wrapper")).text(e(this).data("event-title"));var t=e(this).data("event-location");""==t?e(".dp_pec_card_selected .dp_pec_card_location",e(this).closest(".dp_pec_card_wrapper")).hide():e(".dp_pec_card_selected .dp_pec_card_location",e(this).closest(".dp_pec_card_wrapper")).show(),e(".dp_pec_card_selected .dp_pec_card_location span",e(this).closest(".dp_pec_card_wrapper")).text(t),e(".dp_pec_card_selected .dp_pec_card_time span",e(this).closest(".dp_pec_card_wrapper")).text(e(this).data("event-time")),e(".dp_pec_card_selected",e(this).closest(".dp_pec_card_wrapper")).css("background-image","url("+e(this).data("event-background")+")"),e(".dp_pec_card_selected_foot a",e(this).closest(".dp_pec_card_wrapper")).attr("href",e(this).data("event-link")),e(".dp_pec_card_selected",e(this).closest(".dp_pec_card_wrapper")).css("opacity",0).stop().animate({opacity:1},{duration:500})}),e(t.calendar).on("click",".dp_pec_event_description_more",function(a){"#"==e(this).attr("href")&&(a.preventDefault(),e(this).closest(".dp_pec_event_description").addClass("dp_pec_event_description_full"),void 0!==t.grid&&t.grid.isotope("layout"))}),t.settings.isAdmin||(e(t.calendar).on({mouseenter:function(a){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(e(".eventsPreviewDiv").length||e("body").append(e("<div />").addClass("eventsPreviewDiv")),e(".eventsPreviewDiv").removeClass("pec_skin_light pec_skin_dark").addClass(t.settings.skin),e(".eventsPreviewDiv").html(e(".eventsPreview",e(this)).html()),""==e(".eventsPreviewDiv").html()||e(".dp_daily_event",t.calendar).is(":visible")||e(".eventsPreviewDiv").fadeIn("fast"),e(".eventsPreviewDiv ul li").removeClass("dp_pec_preview_event").show())},mouseleave:function(){e(".dp_daily_event",t.calendar).is(":visible")||e(".eventsPreviewDiv").html("").stop().hide()}},".dp_pec_date:not(.disabled)").bind("mousemove",function(t){if(""!=e(".eventsPreviewDiv").html()){"relative"==e("body").css("position")&&e("body").css("position","static"),e(".eventsPreviewDiv").removeClass("previewRight");var a=e(t.target).closest(".dp_pec_date").offset(),n=e(t.target).closest(".dp_pec_date").height();void 0!==a&&e(".eventsPreviewDiv").css({left:a.left,top:a.top,marginTop:n+12+"px",marginLeft:a.left+e(".eventsPreviewDiv").outerWidth()>=e(window).width()?-(e(".eventsPreviewDiv").outerWidth()-30)+"px":0}),a&&a.left+e(".eventsPreviewDiv").outerWidth()>=e(window).width()&&e(".eventsPreviewDiv").addClass("previewRight")}}),e(t.calendar).on({mouseenter:function(a){if(!e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")){e(".eventsPreviewDiv ul li").hide();var n=e(a.target).data("dppec-event");void 0===n&&(n=e(a.target).closest(".dp_daily_event").data("dppec-event")),e(".eventsPreviewDiv ul").find("li[data-dppec-event='"+n+"']").addClass("dp_pec_preview_event").show(),""!=e(".eventsPreviewDiv").html()&&e(".eventsPreviewDiv").fadeIn("fast")}},mouseleave:function(){e(".eventsPreviewDiv ul li").removeClass("dp_pec_preview_event").show(),e(".eventsPreviewDiv").stop().hide()}},".dp_daily_event:not(.dp_daily_event_show_more)"),e(t.calendar).on({mouseenter:function(a){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(e(".eventsPreviewDiv ul li").hide(),e(".eventsPreviewDiv ul li:gt("+(t.settings.calendar_per_date-1)+")").addClass("dp_pec_preview_event").show(),""!=e(".eventsPreviewDiv").html()&&e(".eventsPreviewDiv").fadeIn("fast"))},mouseleave:function(){e(".eventsPreviewDiv ul li").removeClass("dp_pec_preview_event").show(),e(".eventsPreviewDiv").stop().hide()}},".dp_daily_event.dp_daily_event_show_more"),e(t.calendar).on("mouseup",".dp_pec_date:not(.disabled)",function(a){if(!e(a.target).hasClass("dp_daily_event")&&!e(a.target).parent().hasClass("dp_daily_event")||e(a.target).hasClass("dp_daily_event_show_more"))if("modern"!=t.settings.type){if(!t.calendar.hasClass("dp_pec_daily")&&!t.calendar.hasClass("dp_pec_weekly")){if(""!=t.settings.event_id&&e(".dp_pec_form_desc").length){if(!e(this).find(".dp_book_event_radio").length)return;return e(".dp_book_event_radio",t.calendar).removeClass("dp_book_event_radio_checked"),e(this).find(".dp_book_event_radio").addClass("dp_book_event_radio_checked"),void e("#pec_event_page_book_date",".dpProEventCalendarModal").val(e(this).data("dppec-date"))}if(!e(".dp_pec_content",t.calendar).hasClass("isDragging")&&(1===a.which||0===a.which)){t._removeElements();var n={date:e(this).data("dppec-date"),calendar:t.settings.calendar,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),event_id:t.settings.event_id,calendar_per_date:t.settings.calendar_per_date,author:t.settings.author,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,type:t.settings.type,action:"getEvents",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(n),void 0!==t.cache[t.cache_param]?t._get_events(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,n,function(e){t._get_events(e)})}}}else e(a.target).hasClass("dp_daily_event_show_more")&&(e(".dp_daily_event",e(this)).show(),e(".dp_daily_event_show_more",e(this)).hide())}),e(t.calendar).on("click",".dp_pec_date_event_image_zoom",function(a){1!==a.which&&0!==a.which||void 0!==e(this).data("img-url")&&(e("body").append(e("<img>").addClass("dpProEventCalendar_Image").attr("src",e(this).data("img-url")).fadeIn(300).click(function(e){1!==e.which&&0!==e.which||t.close_modal()})),t.show_overlay())}),e(t.calendar).on("click",".dp_daily_event:not(.dp_daily_event_show_more)",function(a){if(1===a.which||0===a.which){if(t.settings.modal)return a.preventDefault(),t._open_event(e(this).data("dppec-event"),e(this).data("dppec-date")),!1;if("javascript:void(0);"==e(this).attr("href")||"#"==e(this).attr("href")){t._removeElements();var n={event:e(this).data("dppec-event"),calendar:t.settings.calendar,date:e(this).data("dppec-date"),action:"getEvent",postEventsNonce:ProEventCalendarAjax.postEventsNonce};return t.cache_param=JSON.stringify(n),t.isMobile()&&t._goToByScroll(t.calendar),void 0!==t.cache[t.cache_param]?t._get_event(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,n,function(e){t._get_event(e)}),a.preventDefault(),!1}}})),e(t.calendar).on("click",".dp_pec_date_event_back",function(e){e.preventDefault(),t._removeElements(),t._changeLayout()}),e(t.calendar).on({mouseenter:function(a){e(".dp_pec_user_rate li a").addClass("is-off");for(var n=e(this).data("rate-val");n>0;n--)e('.dp_pec_user_rate li a[data-rate-val="'+n+'"]',t.calendar).removeClass("is-off").addClass("is-on")},mouseleave:function(){e(".dp_pec_user_rate li a",t.calendar).removeClass("is-on"),e(".dp_pec_user_rate li a",t.calendar).removeClass("is-off")},click:function(){return e(".dp_pec_user_rate",t.calendar).replaceWith(e("<div>").addClass("dp_pec_loading").attr({id:"dp_pec_loading_rating"})),jQuery.post(ProEventCalendarAjax.ajaxurl,{event_id:e(this).data("event-id"),rate:e(this).data("rate-val"),calendar:t.settings.calendar,action:"ProEventCalendar_RateEvent",postEventsNonce:ProEventCalendarAjax.postEventsNonce},function(a){e("#dp_pec_loading_rating",t.calendar).replaceWith(a)}),!1}},".dp_pec_user_rate li a"),e(".dpProEventCalendar_subscribe",t.calendar).click(function(a){a.preventDefault(),e("body, html").css("overflow","hidden");var n=e(this).next(".dpProEventCalendar_subscribe_form");e(".dpProEventCalendarModal").length&&e(".dpProEventCalendarModal").remove(),e(".dpProEventCalendarModal").length?(e(".dpProEventCalendarModal .pec_book_select_date, .dpProEventCalendarModal .dpProEventCalendar_mailform").remove(),e(".dpProEventCalendarModal").append(e("<div>").addClass("dpProEventCalendar_mailform").html(n.html())),e(".dpProEventCalendarModal, .dpProEventCalendarOverlay").removeAttr("style").show()):(e("body").append(e("<div>").addClass("dpProEventCalendarModal").prepend(e("<h2>").text(t.settings.lang_subscribe).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>'))).append(e("<div>").addClass("dpProEventCalendar_mailform").html(n.html())).show()),t.show_overlay());var d,s=e(".dpProEventCalendarModal");(e(".dpProEventCalendar_subscribe_form",".dpProEventCalendarModal").show(),t.close_button(s),ProEventCalendarAjax.recaptcha_enable&&""!=ProEventCalendarAjax.recaptcha_site_key)&&(d=grecaptcha.render(e("#pec_subscribe_captcha",".dpProEventCalendarModal")[0],{sitekey:ProEventCalendarAjax.recaptcha_site_key}));e(".dpProEventCalendar_send",".dpProEventCalendarModal").click(function(a){a.preventDefault(),e(this).prop("disabled",!0),e(".dpProEventCalendar_sending_email",".dpProEventCalendarModal").css("display","inline-block");var n={your_name:e("#dpProEventCalendar_your_name",".dpProEventCalendarModal").val(),your_email:e("#dpProEventCalendar_your_email",".dpProEventCalendarModal").val(),calendar:t.settings.calendar,action:"ProEventCalendar_NewSubscriber",postEventsNonce:ProEventCalendarAjax.postEventsNonce},s=!1;ProEventCalendarAjax.recaptcha_enable&&""!=ProEventCalendarAjax.recaptcha_site_key&&(n.grecaptcharesponse=grecaptcha.getResponse(d),""==n.grecaptcharesponse&&(s=!0)),""==e("#dpProEventCalendar_your_name",".dpProEventCalendarModal").val()||""==e("#dpProEventCalendar_your_email",".dpProEventCalendarModal").val()||s?(e(this).prop("disabled",!1),e(".dpProEventCalendar_sending_email",".dpProEventCalendarModal").hide(),e(".dp_pec_notification_event_succesfull, .dp_pec_notification_event_error",".dpProEventCalendarModal").hide(),e(".dp_pec_notification_event_error",".dpProEventCalendarModal").css("display","inline-block")):jQuery.post(ProEventCalendarAjax.ajaxurl,n,function(t){e(".dpProEventCalendar_send",".dpProEventCalendarModal").prop("disabled",!1),e(".dpProEventCalendar_sending_email",".dpProEventCalendarModal").hide(),e(".dp_pec_notification_event_succesfull, .dp_pec_notification_event_error",".dpProEventCalendarModal").hide(),e(".dp_pec_notification_event_succesfull",".dpProEventCalendarModal").css("display","inline-block"),e("form",".dpProEventCalendarModal")[0].reset(),"undefined"!=typeof grecaptcha&&grecaptcha.reset(d)})}),e("input, textarea",".dpProEventCalendarModal").placeholder()}),e(".dp_pec_references",t.calendar).click(function(a){a.preventDefault(),e(this).hasClass("active")?(e(this).removeClass("active"),e(".dp_pec_references_div",t.calendar).slideUp("fast")):(e(this).addClass("active"),e(".dp_pec_references_div",t.calendar).slideDown("fast"))}),e(t.calendar).on("click",".dp_pec_open_map",function(e){e.preventDefault(),t.show_overlay(),t.open_map(this)}),t.open_options(),"calendar"==t.monthlyView){var c=e(".dp_pec_content",t.calendar).find(".dp_pec_date[data-dppec-date='"+t.settings.defaultDateFormat+"']");void 0===c.attr("style")&&t.settings.show_current_date&&""!=t.settings.current_date_color&&(c.addClass("dp_pec_special_date"),e(".dp_pec_date_item, .dp_special_date_dot",c).css("background-color",t.settings.current_date_color))}e(".dp_pec_view_all",t.calendar).click(function(a){a.preventDefault(),e(".dp_pec_content",t.calendar).hasClass("isDragging")||1!==a.which&&0!==a.which||("calendar"==t.monthlyView?(e(this).html(e(this).data("translation-calendar")),t.monthlyView="list"):(e(this).html(e(this).data("translation-list")),t.monthlyView="calendar"),t._changeMonth())}),e(".dp_pec_search_btn",t.calendar).click(function(e){e.preventDefault(),1!==e.which&&0!==e.which||t.show_search(!1)}),e(".dp_pec_search_close",t.calendar).click(function(e){e.preventDefault(),1!==e.which&&0!==e.which||t.show_search(!1)}),t.settings.selectric&&e(".dp_pec_layout select, .dp_pec_add_form select, .dp_pec_nav select, .dp_pec_accordion_wrapper select",t.calendar).selectric({disableOnMobile:!1}),e(window).bind("unload",function(a){e(".dp_pec_nav .selectric-wrapper",t.calendar).remove()}),"monthly-all-events"==t.view&&"accordion"!=t.settings.type&&"accordion-upcoming"!=t.settings.type&&"add-event"!=t.settings.type&&"list-author"!=t.settings.type&&"grid"!=t.settings.type&&"grid-upcoming"!=t.settings.type&&"card"!=t.settings.type&&"slider"!=t.settings.type&&"carousel"!=t.settings.type&&"compact-upcoming"!=t.settings.type&&"list-upcoming"!=t.settings.type&&"gmaps-upcoming"!=t.settings.type&&"today-events"!=t.settings.type&&"bookings-user"!=t.settings.type&&"past"!=t.settings.type&&"compact"!=t.settings.type&&"modern"!=t.settings.type&&"countdown"!=t.settings.type&&(e(".dp_pec_view_all",t.calendar).addClass("active"),t.monthlyView="list",t._changeMonth()),e(".dp_pec_references_close",t.calendar).click(function(a){a.preventDefault(),e(".dp_pec_references",t.calendar).removeClass("active"),e(".dp_pec_references_div",t.calendar).slideUp("fast")}),e(".dp_pec_search",t.calendar).one("click",function(t){e(this).val("")}),e(".dp_pec_accordion_event",t.calendar).length&&(e(t.calendar).on("click",".dp_pec_accordion_event",function(a){e(a.target).hasClass("dp_pec_more_options")||e(a.target).hasClass("pec_event_page_book")||e(a.target).hasClass("fa-calendar")||e(a.target).hasClass("dp_pec_open_map")||e(a.target).hasClass("fa-map-marker-alt")||e(this).hasClass("visible")||"dp_pec_date_event_close"!=a.target.className&&"fa fa-close"!=a.target.className&&(e(".dp_pec_accordion_event",t.calendar).removeClass("visible"),e(this).addClass("visible"),void 0!==t.grid&&t.grid.isotope("layout"))}),e(t.calendar).on("click",".dp_pec_date_event_close",function(a){e(".dp_pec_accordion_event",t.calendar).removeClass("visible"),void 0!==t.grid&&t.grid.isotope("layout")})),e(".dp_pec_view_action",t.calendar).length&&e(".dp_pec_view_action",t.calendar).click(function(a){a.preventDefault(),e(".dp_pec_view_action",t.calendar).removeClass("active"),e(this).addClass("active"),t.view!=e(this).data("pec-view")&&(t.view=e(this).data("pec-view"),t._changeLayout())}),t.create_event_modal(!1),e(".dp_pec_cancel_event",t.calendar).length&&e(".dp_pec_cancel_event",t.calendar).click(function(a){a.preventDefault(),e(this).hide(),e(".dp_pec_add_event",t.calendar).show(),e(".dp_pec_add_form",t.calendar).slideUp("fast"),e(".dp_pec_notification_event_succesfull",t.calendar).hide()}),e(".event_image",t.calendar).length&&e(t.calendar).on("change",".event_image",function(){e("#event_image_lbl",e(this).parent()).val(e(this).val().replace(/^.*[\\\/]/,""))}),t.remove_event(),e(t.calendar).on("click",".pec_cancel_booking",function(a){a.preventDefault(),e("body, html").css("overflow","hidden"),e(".dpProEventCalendarModalEditEvent").length?(e(".dpProEventCalendar_eventform").html(e(this).next().html()),e(".dpProEventCalendarModalEditEvent").addClass("dpProEventCalendarModalSmall"),e(".dpProEventCalendarModalEditEvent h2").text(e(this).text()).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>')),e(".dpProEventCalendarModalEditEvent, .dpProEventCalendarOverlay").show()):(e("body").append(e("<div>").addClass("dpProEventCalendarModalEditEvent dpProEventCalendarModalSmall dp_pec_new_event_wrapper").prepend(e("<h2>").text(e(this).text()).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>'))).append(e("<div>").addClass("dpProEventCalendar_eventform").append(e(this).next().children().clone(!0))).show()),t.show_overlay()),$modal=e(".dpProEventCalendarModalEditEvent"),t.close_button($modal),e(".dpProEventCalendarModalEditEvent").on("click",".dp_pec_cancel_booking",function(a){a.preventDefault(),e(this).addClass("dp_pec_disabled");e(this).closest(".add_new_event_form");var n=e(this).html();e(this).html(t.settings.lang_sending);var d=this,s=(e(this).closest("form"),{calendar:t.settings.calendar,action:"cancelBooking",postEventsNonce:ProEventCalendarAjax.postEventsNonce});e(this).closest(".add_new_event_form").ajaxForm({url:ProEventCalendarAjax.ajaxurl,data:s,success:function(t){e(d).html(n),location.reload(),e(d).removeClass("dp_pec_disabled")}}).submit()})}),t.submit_event_hook(t.calendar),e(".dp_pec_search_form",t.calendar).submit(function(){return""==e(this).find(".dp_pec_search").val()||e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t._removeElements(),e.post(ProEventCalendarAjax.ajaxurl,{key:e(this).find(".dp_pec_search").val(),calendar:t.settings.calendar,columns:t.settings.columns,calendar_per_date:t.settings.calendar_per_date,author:t.settings.author,action:"getSearchResults",postEventsNonce:ProEventCalendarAjax.postEventsNonce},function(a){e(".dp_pec_content",t.calendar).removeClass("dp_pec_content_loading").empty().html(a),t.create_event_modal(!0),t.eventDates=e(".dp_pec_date",t.calendar),t.eventDates.hide().fadeIn(500),t.create_isotope(".dp_pec_search_results")})),!1}),e(".dp_pec_icon_search",t.calendar).click(function(a){if(a.preventDefault(),""!=e(this).parent().find(".dp_pec_content_search_input").val()&&!e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")){t._removeElements();var n=e(this).data("results_lang");e(".events_loading",t.calendar).show(),e.post(ProEventCalendarAjax.ajaxurl,{key:e(this).parent().find(".dp_pec_content_search_input").val(),type:"accordion",calendar:t.settings.calendar,calendar_per_date:t.settings.calendar_per_date,columns:t.settings.columns,author:t.settings.author,action:"getSearchResults",postEventsNonce:ProEventCalendarAjax.postEventsNonce},function(a){t.accordion_update_content(a),e(".dp_pec_content",t.calendar).removeClass("dp_pec_content_loading"),e(".actual_month",t.calendar).text(n),e(".return_layout",t.calendar).show(),e(".month_arrows",t.calendar).hide(),e(".events_loading",t.calendar).hide()})}return!1}),e(".return_layout",t.calendar).click(function(){e(this).hide(),e(".month_arrows",t.calendar).show(),e(".dp_pec_content_search_input",t.calendar).val(""),t._changeMonth()}),e(t.calendar).on("click",".dpProEventCalendar_load_more",function(){var a=e(this).parent().find(".dp_pec_isotope:not(.dp_pec_date_event_head,.dp_pec_date_block_wrap):hidden").slice(0,e(this).data("pagination"));return a.show(),e(this).parent().find(".dp_pec_isotope:not(.dp_pec_date_event_head):visible:last").prevAll(".dp_pec_date_block_wrap").show(),e(this).data("total")<=e(this).parent().find(".dp_pec_isotope:not(.dp_pec_date_event_head,.dp_pec_date_block_wrap):visible").length&&e(this).hide(),void 0!==t.grid&&t.grid.isotope("appended",a),!1}),e(".dp_pec_content_search_input",t.calendar).keyup(function(a){13==a.keyCode&&e(".dp_pec_icon_search",t.calendar).trigger("click")}),e(".pec_categories_list",t.calendar).length&&(t.category=e(".pec_categories_list",t.calendar).val(),e(".pec_categories_list",t.calendar).on("change",function(){return t.category!=e(this).val()&&(t.category=e(this).val(),e(".dp_pec_search_form",t.calendar).find(".dp_pec_search").val(""),t._changeLayout(),!1)})),e(".pec_speaker_list",t.calendar).length&&(t.speaker=e(".pec_speaker_list",t.calendar).val(),e(".pec_speaker_list",t.calendar).on("change",function(){return t.speaker!=e(this).val()&&(t.speaker=e(this).val(),e(".dp_pec_search_form",t.calendar).find(".dp_pec_search").val(""),t._changeLayout(),!1)})),e(".pec_location_list",t.calendar).length&&(t.location=e(".pec_location_list",t.calendar).val(),e(".pec_location_list",t.calendar).on("change",function(){return t.location!=e(this).val()&&(t.location=e(this).val(),e(".dp_pec_search_form",t.calendar).find(".dp_pec_search").val(""),t._changeLayout(),!1)})),e(".dp_pec_nav select.pec_switch_year",t.calendar).on("change",function(){return e(".dp_pec_search_form",t.calendar).find(".dp_pec_search").val(""),t.settings.actualYear=e(this).val(),t._changeMonth(),!1}),e(".dp_pec_nav select.pec_switch_month",t.calendar).on("change",function(){return t.switch_month(e(this).val()),!1}),e(".month_year_dd li",t.calendar).on("click",function(){return t.switch_month(e(this).data("month")),!1})},switch_month:function(t){e(".dp_pec_search_form",this.calendar).find(".dp_pec_search").val("");var a=t;if(-1!==a.indexOf("-")){var n=a.split("-");this.settings.actualYear=parseInt(n[1],10),a=n[0]}for(i=0;i<this.settings.monthNames.length;i++)this.settings.monthNames[i]==a&&(this.settings.actualMonth=i+1);this._changeMonth()},_open_event:function(t,a){var n=this;n.show_overlay(),e(".dpProEventCalendarEventModal").length&&e(".dpProEventCalendarEventModal").remove(),e("body").append(e("<div>").addClass("dpProEventCalendarEventModal").prepend(e("<a>").addClass("dp_pec_close").attr({href:"#"}).html(n.settings.lang_close)).show());const d=e(".dpProEventCalendarEventModal");n.close_button(d);var s={calendar:n.settings.calendar,event_id:t,date:a,action:"getEventModal",postEventsNonce:ProEventCalendarAjax.postEventsNonce};n.cache_param=JSON.stringify(s),void 0!==n.cache[n.cache_param]?n._get_event_modal(n.cache[n.cache_param],d):e.post(ProEventCalendarAjax.ajaxurl,s,function(e){n._get_event_modal(e,d)})},isMobile:function(){return"ontouchstart"in document.documentElement},_get_event_modal:function(e,t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=e),t.append(e)},_goToByScroll:function(t){e("html,body").animate({scrollTop:t.offset().top-30},"slow")},detectItemVisibility:function(e,t){var a=e.find("li"),n=e.find("ul"),d=n.outerHeight(),s=a.eq(t).outerHeight(),_=a[t].offsetTop,i=n.scrollTop(),c=_+2*s;n.scrollTop(c>i+d?c-d:_-s<i?_-s:i)},_pec_update_location:function(e,t){switch(jQuery(".pec_location_options",t).hide(),e){case"-1":jQuery(".pec_location_options",t).show()}},_pec_update_frequency:function(e,t){switch(jQuery(".pec_daily_frequency",t).hide(),jQuery(".pec_weekly_frequency",t).hide(),jQuery(".pec_monthly_frequency",t).hide(),e){case"1":jQuery(".pec_daily_frequency",t).show(),jQuery(".pec_weekly_frequency",t).hide(),jQuery(".pec_monthly_frequency",t).hide();break;case"2":jQuery(".pec_daily_frequency",t).hide(),jQuery(".pec_weekly_frequency",t).show(),jQuery(".pec_monthly_frequency",t).hide();break;case"3":jQuery(".pec_daily_frequency",t).hide(),jQuery(".pec_weekly_frequency",t).hide(),jQuery(".pec_monthly_frequency",t).show();break;case"4":jQuery(".pec_daily_frequency",t).hide(),jQuery(".pec_weekly_frequency",t).hide(),jQuery(".pec_monthly_frequency",t).hide()}},_makeResponsive:function(){this.calendar.width()<500?(e(this.calendar).addClass("dp_pec_400"),e(".dp_pec_dayname span",this.calendar).each(function(t){0==e(this).closest(".dp_pec_responsive_weekly").length&&e(this).html(e(this).html().substr(0,3))}),e(".prev_month strong",this.calendar).hide(),e(".next_month strong",this.calendar).hide(),e(".prev_day strong",this.calendar).hide(),e(".next_day strong",this.calendar).hide()):(e(this.calendar).removeClass("dp_pec_400"),e(".prev_month strong",this.calendar).show(),e(".next_month strong",this.calendar).show(),e(".prev_day strong",this.calendar).show(),e(".next_day strong",this.calendar).show())},_removeElements:function(){e(".dpProEventCalendar_load_more",this.calendar).hide(),e(".dp_pec_date, .dp_pec_date_weekly_time, .dp_pec_daily_grid, .dp_pec_dayname, .dp_pec_isotope",this.calendar).fadeTo(500,.1),e(".dp_pec_monthly_row, .dp_pec_monthly_row_space, .dp_pec_responsive_weekly",this.calendar).hide(),e(".dp_pec_content",this.calendar).addClass("dp_pec_content_loading"),e(".eventsPreviewDiv").html("").hide()},_prevMonth:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualMonth--,t.settings.actualMonth=0==t.settings.actualMonth?12:t.settings.actualMonth,t.settings.actualYear=12==t.settings.actualMonth?t.settings.actualYear-1:t.settings.actualYear,t._changeMonth())},_nextMonth:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualMonth++,t.settings.actualMonth=13==t.settings.actualMonth?1:t.settings.actualMonth,t.settings.actualYear=1==t.settings.actualMonth?t.settings.actualYear+1:t.settings.actualYear,t._changeMonth())},_prevDay:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualDay--,t._changeDay())},_nextDay:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualDay++,t._changeDay())},_prevWeek:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualDay-=7,t._changeWeek())},_nextWeek:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualDay+=7,t._changeWeek())},_today:function(t){e(".dp_pec_content",t.calendar).hasClass("dp_pec_content_loading")||(t.settings.actualDay=t.orig_settings.actualDay,t.settings.actualMonth=t.orig_settings.actualMonth,t.settings.actualYear=t.orig_settings.actualYear,t._changeLayout())},_changeYear:function(){var t=this;e(".dp_pec_yearly_calendar",t.calendar).addClass("dp_pec_content_loading");var a={year:t.settings.actualYear,calendar:t.settings.calendar,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),is_admin:t.settings.isAdmin,event_id:t.settings.event_id,author:t.settings.author,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,type:t.settings.type,action:"getYear",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(a),void 0!==t.cache[t.cache_param]?t._get_year(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,a,function(e){t._get_year(e)})},_changeMonth:function(){var t=this;(e(".dp_pec_nav_monthly",t.calendar).show(),e(".actual_month",t.calendar).html(t.settings.monthNames[t.settings.actualMonth-1]+" "+t.settings.actualYear),e(".dp_pec_nav select.pec_switch_month",t.calendar).length)&&(-1!==e(".dp_pec_nav select.pec_switch_month",t.calendar).val().indexOf("-")?e(".dp_pec_nav select.pec_switch_month",t.calendar).val(t.settings.monthNames[t.settings.actualMonth-1]+"-"+t.settings.actualYear):e(".dp_pec_nav select.pec_switch_month",t.calendar).val(t.settings.monthNames[t.settings.actualMonth-1]));e(".dp_pec_nav select.pec_switch_year",t.calendar).val(t.settings.actualYear),e(".dp_pec_nav select",t.calendar).selectric("refresh"),t._removeElements(),t.show_search(!0),t.settings.dateRangeStart&&t.settings.dateRangeStart.substr(0,7)==t.settings.actualYear+"-"+t._str_pad(t.settings.actualMonth,2,"0","STR_PAD_LEFT")&&!t.settings.isAdmin?e(".prev_month",t.calendar).hide():e(".prev_month",t.calendar).show(),t.settings.dateRangeEnd&&t.settings.dateRangeEnd.substr(0,7)==t.settings.actualYear+"-"+t._str_pad(t.settings.actualMonth,2,"0","STR_PAD_LEFT")&&!t.settings.isAdmin?e(".next_month",t.calendar).hide():e(".next_month",t.calendar).show();var a=Date.UTC(t.settings.actualYear,t.settings.actualMonth-1,15)/1e3;if("accordion"==t.settings.type){e(".pec-month-wrap ul",t.calendar).length&&($month_list=e(".pec-month-wrap ul",t.calendar),$month_list.find("li.pec-active").removeClass("pec-active"),$month_list.find("li[data-month="+t.settings.monthNames[t.settings.actualMonth-1]+"-"+t.settings.actualYear+"]").addClass("pec-active")),e(".events_loading",t.calendar).show();var n={month:t.settings.actualMonth,year:t.settings.actualYear,calendar:t.settings.calendar,columns:t.settings.columns,limit:t.settings.limit,widget:t.settings.widget,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),event_id:t.settings.event_id,author:t.settings.author,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,action:"getEventsMonthList",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(n),void 0!==t.cache[t.cache_param]?t._get_events_month_list(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,n,function(e){t._get_events_month_list(e)})}else if("calendar"==t.monthlyView){(new Date).getTime(),n={date:a,calendar:t.settings.calendar,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),is_admin:t.settings.isAdmin,event_id:t.settings.event_id,calendar_per_date:t.settings.calendar_per_date,author:t.settings.author,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,type:t.settings.type,action:"getDate",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(n),void 0!==t.cache[t.cache_param]?t._get_date(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,n,function(e){t._get_date(e)})}else{n={month:t.settings.actualMonth,year:t.settings.actualYear,calendar:t.settings.calendar,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),event_id:t.settings.event_id,calendar_per_date:t.settings.calendar_per_date,author:t.settings.author,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,action:"getEventsMonth",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(n),void 0!==t.cache[t.cache_param]?t._get_events_month(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,n,function(e){t._get_events_month(e)})}},_get_events_month:function(t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=t),this.create_event_modal(!0),e(".dp_pec_content",this.calendar).removeClass("dp_pec_content_loading").empty().html(t),e(this.calendar).removeClass("dp_pec_daily"),e(this.calendar).removeClass("dp_pec_weekly"),e(this.calendar).addClass("dp_pec_"+this.view),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_daily"),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_weekly"),e(".dp_pec_wrapper",this.calendar).addClass("dp_pec_"+this.view),this.eventDates=e(".dp_pec_date",this.calendar),e(".dp_pec_date",this.calendar).hide().fadeIn(500),this._makeResponsive()},_get_events_month_list:function(t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=t),e(".events_loading",this.calendar).hide(),this.accordion_update_content(t),e(".dp_pec_content",this.calendar).removeClass("dp_pec_content_loading")},_get_date:function(t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=t),e(".dp_pec_content",this.calendar).removeClass("dp_pec_content_loading").empty().html(t);var a=e(".dp_pec_content",this.calendar).find(".dp_pec_date[data-dppec-date='"+this.settings.defaultDateFormat+"']"),n=a.find(".dp_pec_date_item");void 0===n.attr("style")&&this.settings.show_current_date&&""!=this.settings.current_date_color&&(a.addClass("dp_pec_special_date"),n.css("background-color",this.settings.current_date_color),e(".dp_special_date_dot",n).css("background-color",this.settings.current_date_color)),e(this.calendar).removeClass("dp_pec_daily"),e(this.calendar).removeClass("dp_pec_weekly"),e(this.calendar).addClass("dp_pec_"+this.view),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_daily"),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_weekly"),e(".dp_pec_wrapper",this.calendar).addClass("dp_pec_"+this.view),this.eventDates=e(".dp_pec_date",this.calendar),e(".dp_pec_date",this.calendar).hide().show(),this._makeResponsive()},_get_year:function(t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=t),e(".dp_pec_yearly_calendar",this.calendar).removeClass("dp_pec_content_loading").empty().html(t),this._makeResponsive()},_get_events:function(e){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=e),this.display_results_events(e)},_get_event:function(e){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=e),this.display_results_events(e)},_changeDay:function(){var t=this;e(".dp_pec_nav_daily",t.calendar).show(),t._removeElements();const a={date:Date.UTC(t.settings.actualYear,t.settings.actualMonth-1,t.settings.actualDay)/1e3,calendar:t.settings.calendar,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),event_id:t.settings.event_id,calendar_per_date:t.settings.calendar_per_date,author:t.settings.author,columns:t.settings.columns,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,is_admin:t.settings.isAdmin,action:"getDaily",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(a),void 0!==t.cache[t.cache_param]?t._get_daily(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,a,function(e){t._get_daily(e)})},_get_daily:function(t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=t);var a=t.substr(0,t.indexOf(">!]--\x3e")).replace("\x3c!--","");e("span.actual_day",this.calendar).html(a),e(".dp_pec_content",this.calendar).removeClass("dp_pec_content_loading").empty().html(t),e(this.calendar).removeClass("dp_pec_monthly"),e(this.calendar).removeClass("dp_pec_weekly"),e(this.calendar).addClass("dp_pec_daily"),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_monthly"),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_weekly"),e(".dp_pec_wrapper",this.calendar).addClass("dp_pec_daily"),this.eventDates=e(".dp_pec_date",this.calendar),e(".dp_pec_date",this.calendar).hide().show(),this._makeResponsive()},_changeWeek:function(){var t=this;e(".dp_pec_nav_weekly",t.calendar).show(),t._removeElements();const a={date:Date.UTC(t.settings.actualYear,t.settings.actualMonth-1,t.settings.actualDay)/1e3,calendar:t.settings.calendar,category:""!=t.settings.category?t.settings.category:e("select.pec_categories_list",t.calendar).val(),location:""!=t.settings.location?t.settings.location:e("select.pec_location_list",t.calendar).val(),speaker:""!=t.settings.speaker?t.settings.speaker:e("select.pec_speaker_list",t.calendar).val(),event_id:t.settings.event_id,author:t.settings.author,calendar_per_date:t.settings.calendar_per_date,include_all_events:t.settings.include_all_events,modal:t.settings.modal,hide_old_dates:t.settings.hide_old_dates,is_admin:t.settings.isAdmin,action:"getWeekly",postEventsNonce:ProEventCalendarAjax.postEventsNonce};t.cache_param=JSON.stringify(a),void 0!==t.cache[t.cache_param]?t._get_weekly(t.cache[t.cache_param]):e.post(ProEventCalendarAjax.ajaxurl,a,function(e){t._get_weekly(e)})},_get_weekly:function(t){void 0===this.cache[this.cache_param]&&(this.cache[this.cache_param]=t);var a=t.substr(0,t.indexOf(">!]--\x3e")).replace("\x3c!--","");e("span.actual_week",this.calendar).html(a),e(".dp_pec_content",this.calendar).removeClass("dp_pec_content_loading").empty().html(t),e(".dp_daily_event",this.calendar).each(function(){e(this).width()>0&&e(this).width()<80&&e(this).find("span").hide()}),e(this.calendar).removeClass("dp_pec_monthly"),e(this.calendar).removeClass("dp_pec_daily"),e(this.calendar).addClass("dp_pec_weekly"),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_monthly"),e(".dp_pec_wrapper",this.calendar).removeClass("dp_pec_daily"),e(".dp_pec_wrapper",this.calendar).addClass("dp_pec_weekly"),this.eventDates=e(".dp_pec_date",this.calendar),e(".dp_pec_date",this.calendar).hide().show(),this._makeResponsive()},toggle_filter:function(t){t.hasClass("dp_pec_btn_active")?e(t).removeClass("dp_pec_btn_active"):e(t).addClass("dp_pec_btn_active"),e(".dp_pec_nav",this.calendar).toggle()},_changeLayout:function(){this._removeElements(),this.show_search(!0),"compact"!=this.settings.type&&"modern"!=this.settings.type&&"accordion"!=this.settings.type&&"yearly"!=this.settings.type&&e(".dp_pec_nav",this.calendar).hide(),"yearly"!=this.settings.type?"monthly"!=this.view&&"monthly-all-events"!=this.view?"daily"!=this.view?"weekly"!=this.view||this._changeWeek():this._changeDay():this._changeMonth():this._changeYear()},display_results_events:function(t){e(".dp_pec_content",this.calendar).removeClass("dp_pec_content_loading").empty().html(t),this.eventDates=e(".dp_pec_date",this.calendar),e(".dp_pec_date",this.calendar).hide().fadeIn(500),this.create_event_modal(!0)},accordion_month_dropdown:function(){var t=this;e(".pec-dropdown-month",t.calendar).click(function(a){a.preventDefault();var n=e(this).next(".month_year_dd");if(e(this).hasClass("pec_active"))e(this).removeClass("pec_active"),n.hide();else{e(this).addClass("pec_active");var d=n.find(".pec-active").data("pec-index");n.show(),t.detectItemVisibility(n,d)}})},more_dates:function(){var t=this;e(".pec_event_page_action",t.calendar).click(function(a){a.preventDefault();var n=e(".pec_event_page_action_menu",t.calendar);if(e(this).hasClass("active"))e(this).removeClass("active"),n.hide();else{e(this).addClass("active");var d=n.find(".pec_event_page_action_menu_active").data("pec-index");n.show(),t.detectItemVisibility(n,d)}})},starts_in:function(){var t,a=e(".pec_event_page_date",this.calendar).find("span.pec_starts_in"),n=new Date(a.data("countdown-year"),a.data("countdown-month")-1,a.data("countdown-day"),a.data("countdown-hour"),a.data("countdown-minute")),d=(a.data("countdown-remaining"),a.data("tzo")),s=new Date;currentTime_getTime=s.getTime(),t=new Date(n.getTime()-s.getTime()+6e4*(d-s.getTimezoneOffset()));var _=Math.floor(Math.abs((n.getTime()-s.getTime()+6e4*(d-s.getTimezoneOffset()))/864e5)),i=t.getUTCHours(),c=t.getUTCMinutes(),o=!1;if(t.getTime()<0&&(_=0,i=0,c=0,o=!0),o)e(".pec_event_page_date p.pec_event_page_starts",this.calendar).hide(),e(".pec_event_page_date p.pec_event_page_date_starts_in",this.calendar).hide();else{var r="";if(_>0){var p=this.settings.translate.days;1==_&&(p=this.settings.translate.day),r+="<strong>"+_+"</strong> "+p+" "}if(i>0&&_<3){var l=this.settings.translate.hours;1==i&&(l=this.settings.translate.hour),r+="<strong>"+i+"</strong> "+l+" "}if(0==_){var h=this.settings.translate.minutes;1==c&&(h=this.settings.translate.minute),r+="<strong>"+c+"</strong> "+h}e(".pec_event_page_date",this.calendar).find("span.pec_starts_in").html(r.toLowerCase())}},_setup_countdown:function(t,a,n,d){var s=this,_=0;setInterval(function(){_+=1e3;var d,i=new Date(a.getTime());currentTime_getTime=i.getTime()+_,d=new Date(t.getTime()-currentTime_getTime);var c=Math.floor(Math.abs((t.getTime()-currentTime_getTime)/864e5)),o=d.getUTCHours(),r=d.getUTCMinutes(),p=d.getUTCSeconds();d.getTime()<0&&(c=0,o=0,r=0,p=0),e(".dp_pec_countdown .dp_pec_countdown_days",e(n)).html(s._str_pad(c,2,"0","STR_PAD_LEFT")),0==c&&e(".dp_pec_countdown .dp_pec_countdown_days_wrap, .dp_pec_countdown .dp_pec_countdown_days_wrap *",e(n)).hide(),1==c?e(".dp_pec_countdown .dp_pec_countdown_days_wrap .dp_pec_countdown_days_txt",e(n)).text(e(".dp_pec_countdown .dp_pec_countdown_days_wrap .dp_pec_countdown_days_txt").data("day")):e(".dp_pec_countdown .dp_pec_countdown_days_wrap .dp_pec_countdown_days_txt",e(n)).text(e(".dp_pec_countdown .dp_pec_countdown_days_wrap .dp_pec_countdown_days_txt").data("days")),e(".dp_pec_countdown .dp_pec_countdown_hours",e(n)).html(s._str_pad(o,2,"0","STR_PAD_LEFT")),1==o?e(".dp_pec_countdown .dp_pec_countdown_hours_wrap .dp_pec_countdown_hours_txt",e(n)).text(e(".dp_pec_countdown .dp_pec_countdown_hours_wrap .dp_pec_countdown_hours_txt").data("hour")):e(".dp_pec_countdown .dp_pec_countdown_hours_wrap .dp_pec_countdown_hours_txt",e(n)).text(e(".dp_pec_countdown .dp_pec_countdown_hours_wrap .dp_pec_countdown_hours_txt").data("hours")),e(".dp_pec_countdown .dp_pec_countdown_minutes",e(n)).html(s._str_pad(r,2,"0","STR_PAD_LEFT")),e(".dp_pec_countdown .dp_pec_countdown_seconds",e(n)).html(s._str_pad(p,2,"0","STR_PAD_LEFT"))},1e3)},init_tooltips:function(){e("[data-pec-tooltip]",this.calendar).each(function(){var t=e(this);if(!t.find(".dp-pec-tooltip").length){var a=t.data("pec-tooltip");""!=a&&t.append(e("<div>").addClass("dp-pec-tooltip").text(a))}})},_str_pad:function(e,t,a,n){var d,s="",_=function(e,t){for(var a="";a.length<t;)a+=e;return a=a.substr(0,t)};return a=void 0!==a?a:" ","STR_PAD_LEFT"!=n&&"STR_PAD_RIGHT"!=n&&"STR_PAD_BOTH"!=n&&(n="STR_PAD_RIGHT"),(d=t-(e+="").length)>0&&("STR_PAD_LEFT"==n?e=_(a,d)+e:"STR_PAD_RIGHT"==n?e+=_(a,d):"STR_PAD_BOTH"==n&&(e=(e=(s=_(a,Math.ceil(d/2)))+e+s).substr(0,t))),e},remove_event:function(){var t=this;e(t.calendar).on("click",".pec_remove_event",function(a){return e("body, html").css("overflow","hidden"),e(".dpProEventCalendarModalEditEvent").length?(e(".dpProEventCalendar_eventform").html(e(this).next().html()),e(".dpProEventCalendarModalEditEvent").addClass("dpProEventCalendarModalSmall"),e(".dpProEventCalendarModalEditEvent h2").text(e(this).text()).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>')),e(".dpProEventCalendarModalEditEvent, .dpProEventCalendarOverlay").show()):(e("body").append(e("<div>").addClass("dpProEventCalendarModalEditEvent dpProEventCalendarModalSmall dp_pec_new_event_wrapper").prepend(e("<h2>").text(e(this).text()).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>'))).append(e("<div>").addClass("dpProEventCalendar_eventform").append(e(this).next().children().clone(!0))).show()),t.show_overlay()),$modal=e(".dpProEventCalendarModalEditEvent"),t.close_button($modal),e(".dpProEventCalendarModalEditEvent").on("click",".dp_pec_remove_event",function(a){a.preventDefault(),e(this).addClass("dp_pec_disabled");e(this).closest(".add_new_event_form");var n=e(this).html();e(this).html(t.settings.lang_sending);var d=this,s=(e(this).closest("form"),{calendar:t.settings.calendar,action:"removeEvent",postEventsNonce:ProEventCalendarAjax.postEventsNonce});e(this).closest(".add_new_event_form").ajaxForm({url:ProEventCalendarAjax.ajaxurl,data:s,success:function(t){e(d).html(n),location.reload(),e(d).removeClass("dp_pec_disabled")}}).submit()}),!1})},open_options:function(){var t=this;e(t.calendar).on("click",".dp_pec_more_options",function(t){t.preventDefault(),e(this).hasClass("dp_pec_active")?(e(this).removeClass("dp_pec_active"),e(this).next(".dp_pec_more_options_hidden").slideUp(200)):(e(this).addClass("dp_pec_active"),e(this).next(".dp_pec_more_options_hidden").slideDown(200))}),e(document).mouseup(function(a){e(a.target).hasClass("dp_pec_more_options")||(e(".dp_pec_more_options",t.calendar).removeClass("dp_pec_active"),e(".dp_pec_more_options_hidden",t.calendar).slideUp(200),!e(".pec_event_page_action").hasClass("active")||e(a.target).hasClass("pec_event_page_action")||e(a.target).hasClass("fa-plus")||e(".pec_event_page_action").trigger("click"),(t.type=e(".pec-dropdown-month").hasClass("pec_active")&&!e(a.target).hasClass("pec-dropdown-month")&&!e(a.target).hasClass("fa-chevron-down"))&&e(".pec-dropdown-month.pec_active").trigger("click"))})},close_modal:function(t){if(e(".dpProEventCalendarMapModal").is(":visible")){const t=e(".dpProEventCalendarMapModal"),a=t.find(".dp_pec_date_event_map_canvas");e("#"+t.data("button"),this.calendar).next(".dp_pec_open_map_wrap").prepend(a)}e(".dpProEventCalendar_Image").is(":visible")&&e(".dpProEventCalendar_Image").remove(),e(".dpProEventCalendarModalEditEvent, .dpProEventCalendarModal, .dpProEventCalendarMapModal, .dpProEventCalendarEventModal, .dpProEventCalendarOverlay").fadeOut("fast"),e("body, html").css("overflow",""),void 0!==t&&e(t).off("click",".dpProEventCalendarClose, .dp_pec_close")},close_button:function(t){var a=this;e(t).on("click",".dpProEventCalendarClose, .dp_pec_close",function(e){e.preventDefault(),a.close_modal(t)})},accordion_update_content:function(t){if(void 0!==this.grid){this.grid.isotope("remove",e(".dp_pec_content_ajax .dp_pec_isotope",this.calendar));var a=[],n=t;e("script",n).remove();var d=e(n);if(0==d.length)return;e.each(d,function(e,t){a.push(t)}),this.grid.isotope("insert",a),this.grid.isotope("layout"),e("script",t).appendTo(this.grid)}else e(".dp_pec_content_ajax",this.calendar).empty().html(t);this.init_tooltips()},submit_event_hook:function(t){var a=this;e(t).off("click",".dp_pec_submit_event"),e(t).on("click",".dp_pec_submit_event",function(n){n.preventDefault(),"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var d=e(this).html(),s=this,_=e(this).closest("form"),i={calendar:a.settings.calendar,action:"submitEvent",postEventsNonce:ProEventCalendarAjax.postEventsNonce},c=!0;return e(".pec_required",_).each(function(){if(e(this).removeClass("dp_pec_validation_error"),e(this).is(":checkbox")){if(0==e(this).is(":checked"))return e(this).addClass("dp_pec_validation_error"),e(this).next(".dp_pec_new_event_validation_msg").show(),void(c=!1)}else if(""==e(this).val())return e(this).is("select")&&(e(this).closest(".selectric-pec_required").removeClass("dp_pec_validation_error"),e(this).closest(".selectric-pec_required").addClass("dp_pec_validation_error")),e(this).addClass("dp_pec_validation_error"),e(this).next(".dp_pec_new_event_validation_msg").show(),void(c=!1)}),!!c&&((!ProEventCalendarAjax.recaptcha_enable||""==ProEventCalendarAjax.recaptcha_site_key||(i.grecaptcharesponse=grecaptcha.getResponse(pec_new_event_captcha),""!=i.grecaptcharesponse))&&(e(this).addClass("dp_pec_disabled"),_.fadeTo("fast",.5),e(this).html(e(this).data("lang-sending")),void e(this).closest(".add_new_event_form").ajaxForm({url:ProEventCalendarAjax.ajaxurl,data:i,success:function(n){e(s).html(d),_.hasClass("edit_event_form")||e(_)[0].reset(),e("select",_).selectric("refresh"),e(".dp_pec_form_title",_).removeClass("dp_pec_validation_error"),e(s).removeClass("dp_pec_disabled"),e(".dp_pec_notification_event_succesfull",_.parent()).show(),a.goToFirstStep(t),_.fadeTo("fast",1)}}).submit()))})},create_event_modal:function(t){var a=this,n=".dp_pec_add_event",d="getNewEventForm";t&&(n=".pec_edit_event",d="getEditEventForm"),e(a.calendar).off("click",n),e(a.calendar).on("click",n,function(n){e("body, html").css("overflow","hidden");var s=e(this);e(".dpProEventCalendarModalEditEvent").length?(e(".dpProEventCalendar_eventform").empty().addClass("dp_pec_content_loading"),e(".dpProEventCalendarModalEditEvent").attr("id","dpProEventCalendarModal_"+a.settings.calendar).removeClass("dpProEventCalendarModalSmall"),e(".dpProEventCalendarModalEditEvent h2").text(s.attr("title")).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>')),e(".dpProEventCalendarModalEditEvent, .dpProEventCalendarOverlay").show()):(e("body").append(e("<div>").addClass("dpProEventCalendarModalEditEvent dp_pec_new_event_wrapper").attr("id","dpProEventCalendarModal_"+a.settings.calendar).prepend(e("<h2>").text(s.attr("title")).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>'))).append(e("<div>").addClass("dpProEventCalendar_eventform dp_pec_content_loading"))),e(".dpProEventCalendarModalEditEvent").show(),a.show_overlay());var _=e(".dpProEventCalendarModalEditEvent");a.close_button(_),e(".dpProEventCalendarModalEditEvent").off("change",".event_image"),e(".dpProEventCalendarModalEditEvent").on("change",".event_image",function(){e("#event_image_lbl",e(this).parent()).val(e(this).val().replace(/^.*[\\\/]/,""))});var i={event_id:t?s.data("event-id"):0,calendar:a.settings.calendar,action:d,postEventsNonce:ProEventCalendarAjax.postEventsNonce};return void 0!==e(this).data("time")&&(i.time=e(this).data("time")),e.post(ProEventCalendarAjax.ajaxurl,i,function(t){e(".dpProEventCalendar_eventform").removeClass("dp_pec_content_loading").empty().html(t),a.make_event_form_work(_),a.create_datepicker(_),a.submit_event_hook(_)}),!1})},set_other_location:function(t){var a=this;jQuery("#pec_map_address",t).on("focus",function(){e(".map_lnlat_wrap",t).show(),jQuery("#pec_map_address",t).off("focus");var n,d,s,_,i=new google.maps.Geocoder;function c(e){jQuery("#map_lnlat",t).val([e.lat(),e.lng()].join(", "))}function o(e){jQuery("#pec_map_address",t).val(e)}jQuery("#pec_map_address",t).on("keyup",function(){clearTimeout(s),s=setTimeout(function(){i.geocode({address:jQuery("#pec_map_address",t).val()},function(e,t){if("OVER_QUERY_LIMIT"!=t){var a=e[0].geometry.location;d.setPosition(a),n.getZoom()<12&&n.setZoom(12),n.setCenter(a),c(a)}})},1e3)}),_=new google.maps.LatLng(a.settings.map_lat,a.settings.map_lng),n=new google.maps.Map(jQuery("#pec_mapCanvas",t)[0],{zoom:0!=a.settings.map_lat?12:3,center:_,mapTypeId:google.maps.MapTypeId.ROADMAP}),d=new google.maps.Marker({position:_,title:"Location",map:n,draggable:!0}),c(_),google.maps.event.addListener(d,"dragstart",function(){o("")}),google.maps.event.addListener(d,"drag",function(){c(d.getPosition())}),google.maps.event.addListener(d,"dragend",function(){var e;e=d.getPosition(),i.geocode({latLng:e},function(e){e&&e.length>0&&o(e[0].formatted_address)})})})},goToFirstStep:function(t){var a=e(".dp_pec_form_step_visible",t),n=e(".dp_pec_new_event_steps:first-child",t);e(".pec_form_back, .dp_pec_submit_event",t).hide(),e(".pec_form_next",t).show(),n.addClass("dp_pec_form_step_visible dp_pec_form_step_animation_right"),a.removeClass("dp_pec_form_step_visible dp_pec_form_step_animation_left dp_pec_form_step_animation_right")},create_overlay:function(){var t=this;e(".dpProEventCalendarOverlay").length||e("body").append(e("<div>").addClass("dpProEventCalendarOverlay").click(function(){e(".dpProEventCalendarMapModal").is(":visible")?e(".dpProEventCalendarMapModal").find(".dp_pec_close").trigger("click"):t.close_modal()}))},show_overlay:function(){e("body, html").css("overflow","hidden"),e(".dpProEventCalendarOverlay").fadeIn("fast")},open_map:function(t){e(".dpProEventCalendarMapModal").length&&e(".dpProEventCalendarMapModal").remove();const a=e(t).next(".dp_pec_open_map_wrap").find(".dp_pec_date_event_map_canvas");e("body").append(e("<div>").addClass("dpProEventCalendarMapModal").data("button",e(t).attr("id")).prepend(a).prepend(e("<a>").addClass("dp_pec_close").attr({href:"#"}).html(this.settings.lang_close)));const n=e(".dpProEventCalendarMapModal");n.show(),this.close_button(n)},create_book_event:function(){var t=this;e(document).off("click",".pec_event_page_book"),e(document).on("click",".pec_event_page_book",function(a){e(window).width()>720&&e("body, html").css("overflow","hidden");var n=e(this).find("strong").text();""==n&&(n=e(this).data("pec-tooltip")),e(".dpProEventCalendarModal").length&&e(".dpProEventCalendarModal").remove(),e(".dpProEventCalendarModal").length||(e("body").append(e("<div>").addClass("dpProEventCalendarModal").prepend(e("<h2>").text(n).append(e("<a>").addClass("dpProEventCalendarClose").attr({href:"#"}).html('<i class="fa fa-times"></i>'))).show()),t.show_overlay());const d=e(".dpProEventCalendarModal");return d.show(),t.close_button(d),e(".dpProEventCalendarModal").addClass("dpProEventCalendarModal_Preload"),e.post(ProEventCalendarAjax.ajaxurl,{event_id:e(this).data("event-id"),calendar:e(this).data("calendar"),date:e(this).data("date"),action:"getBookEventForm",postEventsNonce:ProEventCalendarAjax.postEventsNonce},function(t){e(".dpProEventCalendarModal").removeClass("dpProEventCalendarModal_Preload").append(t),e("select",".dpProEventCalendarModal").selectric(),e("#pec_event_page_book_date",".dpProEventCalendarModal").trigger("change"),e("input, textarea",".dpProEventCalendarModal").placeholder()}),!1})},create_isotope:function(t){this.grid=e(t,this.calendar).isotope({itemSelector:".dp_pec_date_event_wrap",layoutMode:"masonry",isOriginLeft:!this.settings.isRTL,masonry:{gutter:20}})},show_search:function(t){e(".dp_pec_search_form",this.calendar).is(":visible")||t?(e(".dp_pec_search_btn",this.calendar).removeClass("active"),e(".dp_pec_search_form",this.calendar).hide(),e(".dp_pec_nav.dp_pec_nav_monthly",this.calendar).show()):(e(".dp_pec_search_btn",this.calendar).addClass("active"),e(".dp_pec_search_form",this.calendar).show(),e(".dp_pec_search_form input[type=search]",this.calendar).focus(),e(".dp_pec_nav.dp_pec_nav_monthly",this.calendar).hide())},create_datepicker:function(t){var a=new Array,n=new Array;e(".dp_pec_extra_dates",t).length&&""!=e(".dp_pec_extra_dates",t).val()&&(a=e(".dp_pec_extra_dates",t).data("extra-dates-parsed").split(" /// "),n=e(".dp_pec_extra_dates_hidden",t).val().split(",")),e(".dp_pec_date_input, .dp_pec_end_date_input, .dp_pec_extra_dates",t).datepicker({beforeShow:function(t,a){e("#ui-datepicker-div").removeClass("dp_pec_datepicker"),e("#ui-datepicker-div").addClass("dp_pec_datepicker")},onSelect:function(t,d){if(e(d.input).hasClass("dp_pec_extra_dates")){e(d.input).val();(_=jQuery.inArray(t,a))>=0?a.splice(_,1):a.push(t);var s=new String;if(a.forEach(function(e){s+=e+", "}),e(d.input).val(s.slice(0,-2)),e(this).prev(".dp_pec_extra_dates_hidden").length){var _,i=e(this).prev(".dp_pec_extra_dates_hidden"),c=(i.val(),(d.selectedMonth+1).toString()),o=d.selectedYear+"-"+c.padStart(2,"0")+"-"+d.selectedDay;(_=jQuery.inArray(o,n))>=0?n.splice(_,1):n.push(o);s=new String;n.forEach(function(e){s+=e+", "}),e(i).val(s.slice(0,-2))}}},showOn:"button",isRTL:this.settings.isRTL,buttonText:'<i class="far fa-calendar-plus"></i>',buttonImageOnly:!1,minDate:0,monthNames:this.settings.monthNames,dayNamesMin:this.settings.dayNamesMin,firstDay:this.settings.firstDay,dateFormat:this.settings.datepicker_dateFormat})},make_event_form_work:function(t){var a=this;if(e(".pec-editor-test",t).length&&t.hasClass("dpProEventCalendarModalEditEvent")){var n=e(".pec-editor-test",t).attr("id");"undefined"!=typeof tinyMCE&&(tinymce.init({selector:n,toolbar:"bold italic underline blockquote strikethrough | bullist numlist | alignleft aligncenter alignright | undo redo | link unlink"}),tinyMCE.execCommand("mceAddEditor",!1,n))}e(t).off("click",".pec_form_back").on("click",".pec_form_back",function(){e(".pec_form_next",t).show(),e(".dp_pec_submit_event",t).hide();var a=e(".dp_pec_form_step_visible",t),n=a.prev();n.is(":first-child")&&e(this).hide(),n.addClass("dp_pec_form_step_visible dp_pec_form_step_animation_right"),a.removeClass("dp_pec_form_step_visible dp_pec_form_step_animation_left dp_pec_form_step_animation_right")}),e(t).off("click",".pec_form_next").on("click",".pec_form_next",function(){var a=e(".dp_pec_form_step_visible",t);const n=a.is(":first-child");var d=!0,s=e(this).closest("form");if(e(".pec_required",s).each(function(){if(e(this).removeClass("dp_pec_validation_error"),e(this).next(".dp_pec_new_event_validation_msg").hide(),n)e(this).hasClass("dp_pec_form_title")&&""==e(this).val()&&(e(this).addClass("dp_pec_validation_error"),e(this).next(".dp_pec_new_event_validation_msg").show(),d=!1);else if(e(this).is(":checkbox")){if(0==e(this).is(":checked"))return e(this).addClass("dp_pec_validation_error"),e(this).next(".dp_pec_new_event_validation_msg").show(),void(d=!1)}else if(""==e(this).val())return e(this).is("select")&&(e(this).closest(".selectric-pec_required").removeClass("dp_pec_validation_error"),e(this).closest(".selectric-pec_required").addClass("dp_pec_validation_error")),e(this).addClass("dp_pec_validation_error"),e(this).next(".dp_pec_new_event_validation_msg").show(),void(d=!1)}),!d)return!1;e(".pec_form_back",t).show();var _=a.next();_.is(":last-child")&&(e(this).hide(),e(this).next().show()),_.addClass("dp_pec_form_step_visible dp_pec_form_step_animation_left"),a.removeClass("dp_pec_form_step_visible dp_pec_form_step_animation_left dp_pec_form_step_animation_right"),e(".dp_pec_notification_event_succesfull",t).hide(),"undefined"!=typeof tinymce&&e(".dp_pec_event_form_preview_description",t).html(tinymce.get(e(".pec-editor-test",t).attr("id")).getContent())}),e(t).off("click",".dp_pec_event_form_options_item").on("click",".dp_pec_event_form_options_item",function(n){e(".dp_pec_event_form_options_item",t).removeClass("dp_pec_event_form_options_item_open"),e(this).addClass("dp_pec_event_form_options_item_open"),e(this).find("input").length&&!e(n.target).hasClass("dp_pec_new_event_text")&&e(this).find("input")[0].focus(),e(this).has(".dp_pec_date_input").length&&e(".dp_pec_date_input",t).datepicker("option","onSelect",function(n,d){e(this).prev(".dp_pec_date_input_hidden").val(d.selectedYear+"-"+a._str_pad(d.selectedMonth+1,2,"0","STR_PAD_LEFT")+"-"+a._str_pad(d.selectedDay,2,"0","STR_PAD_LEFT")),e(".dp_pec_event_form_options_item_date_start",t).html(n)}),e(this).has(".dp_pec_end_date_input").length&&e(".dp_pec_end_date_input",t).datepicker("option","onSelect",function(n,d){e(this).prev(".dp_pec_end_date_input_hidden").val(d.selectedYear+"-"+a._str_pad(d.selectedMonth+1,2,"0","STR_PAD_LEFT")+"-"+a._str_pad(d.selectedDay,2,"0","STR_PAD_LEFT")),e(".dp_pec_event_form_options_item_date_end",t).html(n)})}),e(".add_new_event_form",document).mouseup(function(a){const n=e(".dp_pec_event_form_options_item",t),d=e(a.target).closest(".dp_pec_event_form_options_item_hidden"),s=e(a.target).closest(".dp_pec_datepicker");d.length||s.length||n.removeClass("dp_pec_event_form_options_item_open")}),e(t).off("focusout",".dp_pec_form_title").on("focusout",".dp_pec_form_title",function(){e(".dp_pec_event_form_preview_title",t).html(e(this).val())}),e(t).off("focusout",".dp_pec_form_description").on("focusout",".dp_pec_form_description",function(){e(".dp_pec_event_form_preview_description",t).html(e(this).val())}),e(".dp_pec_clear_end_date",t).length&&e(".dp_pec_clear_end_date",t).click(function(a){a.preventDefault(),e(".dp_pec_end_date_input",t).val(""),e(".dp_pec_event_form_options_item_date_end",t).length&&e(".dp_pec_event_form_options_item_date_end",t).html("")}),e(t).off("ifChanged",'.dp_pec_event_form_options_item_category input[type="checkbox"]').on("ifChanged",'.dp_pec_event_form_options_item_category input[type="checkbox"]',function(a){let n=new Array;e.each(e('.dp_pec_event_form_options_item_category input[type="checkbox"]',t),function(t,a){const d=e(a)[0];d.checked&&n.push(e(d).data("cat-name"))}),e(".dp_pec_event_form_options_item_category .dp_pec_event_form_options_item_sub",t).html(n.join(", "))}),e(t).off("ifChanged",'.dp_pec_event_form_options_item_speakers input[type="checkbox"]').on("ifChanged",'.dp_pec_event_form_options_item_speakers input[type="checkbox"]',function(a){let n=new Array;e.each(e('.dp_pec_event_form_options_item_speakers input[type="checkbox"]',t),function(t,a){const d=e(a)[0];d.checked&&n.push(e(d).data("speaker-name"))}),e(".dp_pec_event_form_options_item_speakers .dp_pec_event_form_options_item_sub",t).html(n.join(", "))}),e(t).off("change","select.pec_recurring_frequency").on("change","select.pec_recurring_frequency",function(n){e(".dp_pec_event_form_options_item_frequency .dp_pec_event_form_options_item_sub",t).html(e(this).children("option:selected").text()),a._pec_update_frequency(this.value,t)}),e(t).off("change",".dp_pec_event_form_options_item_time .dp_pec_new_event_time").on("change",".dp_pec_event_form_options_item_time .dp_pec_new_event_time",function(a){const n=e(this).closest(".dp_pec_event_form_options_item_time"),d=n.find(".dp_pec_start_time_hh").children("option:selected").text()+":"+n.find(".dp_pec_start_time_mm").children("option:selected").text();if(e(".dp_pec_event_form_options_item_time .dp_pec_event_form_options_item_time_start",t).html(d),n.find(".dp_pec_end_time_hh").length){const a=n.find(".dp_pec_end_time_hh").children("option:selected").text()+":"+n.find(".dp_pec_end_time_mm").children("option:selected").text();e(".dp_pec_event_form_options_item_time .dp_pec_event_form_options_item_time_end",t).html(a)}}),e(t).off("change","select.pec_location_form").on("change","select.pec_location_form",function(n){e(".dp_pec_event_form_options_item_location .dp_pec_event_form_options_item_sub",t).html(e(this).children("option:selected").text()),a._pec_update_location(this.value,t)}),a.set_other_location(t),e(t).off("ifChanged",'.dp_pec_event_form_options_item_custom_multiple input[type="checkbox"]').on("ifChanged",'.dp_pec_event_form_options_item_custom_multiple input[type="checkbox"]',function(t){let a=new Array;const n=e(this).closest(".dp_pec_event_form_options_item_custom_multiple");e.each(e('input[type="checkbox"]',n),function(t,n){const d=e(n)[0];d.checked&&a.push(e(d).val())}),e(".dp_pec_event_form_options_item_sub",n).html(a.join(", "))}),e(".dp_pec_new_event_wrapper select").selectric(),e(".dp_pec_new_event_wrapper input.new_event_checkbox").iCheck({checkboxClass:"icheckbox_flat",radioClass:"iradio_flat",increaseArea:"20%"}),ProEventCalendarAjax.recaptcha_enable&&""!=ProEventCalendarAjax.recaptcha_site_key&&e(window).load(function(){pec_new_event_captcha=grecaptcha.render(e("#pec_new_event_captcha",t)[0],{sitekey:ProEventCalendarAjax.recaptcha_site_key})})},getTimeStamp:function(){return(new Date).getTime()}},e.fn.dpProEventCalendar=function(a){var n;return this.each(function(){n=new t(e(this),a),e(this).data("dpProEventCalendar",n)}),this},e.fn.dpProEventCalendar.defaults={monthNames:new Array("January","February","March","April","May","June","July","August","September","October","November","December"),actualMonth:"",actualYear:"",actualDay:"",defaultDate:"",lang_sending:"Sending...",skin:"pec_skin_light",view:"monthly",type:"calendar",limit:"",widget:0,selectric:!0,lockVertical:!0,include_all_events:!1,modal:!1,hide_old_dates:0,calendar:null,show_current_date:!0,dateRangeStart:null,dateRangeEnd:null,draggable:!0,isAdmin:!1,dragOffset:50,recaptcha_enable:!1,allowPageScroll:"vertical",fingers:1},e.fn.dpProEventCalendar.settings={}}(jQuery),function(e){e.fn.extend({onShowProCalendar:function(t,a){return this.each(function(){var n=this,d=null==a||a;if(e.isFunction(t))if(e(this).is(":hidden")){var s=function(){e(n).is(":visible")&&(t.call(),d&&e("body").unbind("click keyup keydown",s))};e("body").bind("click keyup keydown",s)}else t.call()})}})}(jQuery),function(e){function t(t){return e.map(t.split("."),function(e){return parseInt(e,10)})}e.proCalendar_isVersion=function(a,n){if(void 0===a)throw new Error("$.versioncompare needs at least one parameter.");if(a==(n=n||e.fn.jquery))return 0;for(var d=t(a),s=t(n),_=Math.max(d.length,s.length),i=0;i<_;i++)if(d[i]=d[i]||0,s[i]=s[i]||0,d[i]!=s[i])return d[i]>s[i]?1:0;return 0},e(document).ready(function(){e(document).on("change","#pec_event_page_book_date",function(t){jQuery("#pec_event_page_book_quantity option").removeAttr("disabled"),e("#pec_event_page_book_quantity",".dpProEventCalendarModal").val(1).change(),e("#pec_event_page_book_quantity",".dpProEventCalendarModal").selectric("refresh"),0==this.value?jQuery(".pec_event_page_send_booking").prop("disabled",!0):(jQuery(".pec_event_page_send_booking").prop("disabled",!1),e("#pec_event_page_book_quantity option:gt("+(jQuery(this).find(":selected").data("available")-1)+")",".dpProEventCalendarModal").attr("disabled","disabled"),e("#pec_event_page_book_quantity",".dpProEventCalendarModal").selectric("refresh"))}),e(document).on("change","#pec_event_page_book_quantity",function(t){if(e(".dp_pec_payment_price").length){var a=(e(".dp_pec_payment_price").find("span.dp_pec_payment_price_value").data("price")*e(this).val()).toFixed(2);if(e(".dp_pec_payment_price").find("span.dp_pec_payment_price_value").text(a),e(".dp_pec_payment_price").find("span.dp_pec_payment_price_value").data("price-updated",a),e("#pec_payment_discount_value",".dpProEventCalendarModal").length){var n=e("#pec_payment_discount_value",".dpProEventCalendarModal").val();if(""!=n){var d=(100-n)/100*a;e(".dp_pec_payment_price",".dpProEventCalendarModal").find("span.dp_pec_payment_price_value").text(d.toFixed(2))}}}}),e(document).on("submit",".dp_pec_coupon_form",function(){if(""!=e(this).find(".dp_pec_coupon").val()){var t=e(this).find(".dp_pec_coupon");if(t.removeClass("dp_pec_validation_error"),t.hasClass("dp_pec_validation_correct"))return!1;e.post(ProEventCalendarAjax.ajaxurl,{code:e(this).find(".dp_pec_coupon").val(),action:"getCoupon",postEventsNonce:ProEventCalendarAjax.postEventsNonce},function(a){if("null"==a)t.addClass("dp_pec_validation_error");else if(a=jQuery.parseJSON(a),e(".dp_pec_payment_price",".dpProEventCalendarModal").length){var n=(100-a.discount)/100*e(".dp_pec_payment_price",".dpProEventCalendarModal").find("span.dp_pec_payment_price_value").data("price-updated");e(".dp_pec_payment_price",".dpProEventCalendarModal").find("span.dp_pec_payment_price_value").text(n.toFixed(2)),e("#pec_payment_discount_id",".dpProEventCalendarModal").val(a.id),e("#pec_payment_discount_coupon",".dpProEventCalendarModal").val(a.coupon),e("#pec_payment_discount_value",".dpProEventCalendarModal").val(a.discount),t.addClass("dp_pec_validation_correct"),t.closest(".dp_pec_coupon_form").addClass("dp_pec_validation_form_correct"),t.prop("readonly",!0)}})}return!1}),e(document).on("keyup",".dp_pec_coupon",function(t){13==t.keyCode&&e(".dp_pec_coupon_go",".dpProEventCalendarModal").trigger("click")}),e(document).on("click",".dp_pec_notification_close",function(t){t.preventDefault(),e(this).closest(".dp_pec_notification_event").fadeOut("fast")}),e(document).on("click",".pec_event_page_send_booking",function(t){if(e("#pec_event_page_book_name",".dpProEventCalendarModal").length){if(e("#pec_event_page_book_name, #pec_event_page_book_email",".dpProEventCalendarModal").removeClass("dp_pec_validation_error"),""==e("#pec_event_page_book_name",".dpProEventCalendarModal").val())return e("#pec_event_page_book_name",".dpProEventCalendarModal").addClass("dp_pec_validation_error"),!1;if(""==e("#pec_event_page_book_email",".dpProEventCalendarModal").val()||!/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e("#pec_event_page_book_email",".dpProEventCalendarModal").val()))return e("#pec_event_page_book_email",".dpProEventCalendarModal").addClass("dp_pec_validation_error"),!1}if(e("#pec_event_page_book_phone",".dpProEventCalendarModal").length&&(e("#pec_event_page_book_phone",".dpProEventCalendarModal").removeClass("dp_pec_validation_error"),""==e("#pec_event_page_book_phone",".dpProEventCalendarModal").val()))return e("#pec_event_page_book_phone",".dpProEventCalendarModal").addClass("dp_pec_validation_error"),!1;var a=!0;if(e(".pec_required",".dpProEventCalendarModal").each(function(){if(e(this).removeClass("dp_pec_validation_error"),e(this).is(":checkbox")){if(e(this).closest(".dp_pec_wrap_checkbox").removeClass("dp_pec_validation_error"),0==e(this).is(":checked"))return e(this).closest(".dp_pec_wrap_checkbox").addClass("dp_pec_validation_error"),void(a=!1)}else if(""==e(this).val())return e(this).addClass("dp_pec_validation_error"),void(a=!1)}),!a)return!1;if(e("#pec_event_page_book_terms_conditions",".dpProEventCalendarModal").length&&0==e("#pec_event_page_book_terms_conditions",".dpProEventCalendarModal").is(":checked"))return e("#pec_event_page_book_terms_conditions",".dpProEventCalendarModal").focus(),!1;var n={};e(".pec_event_page_book_extra_fields",".dpProEventCalendarModal").length&&e(".pec_event_page_book_extra_fields",".dpProEventCalendarModal").each(function(t){"checkbox"==e(this).attr("type")?e(this).is(":checked")&&(n[e(this).attr("name")]=1):n[e(this).attr("name")]=e(this).val()});var d=e(this);d.prop("disabled",!0),d.css("opacity",.6);var s=e("#pec_event_page_book_event_id",".dpProEventCalendarModal").val(),_=e("#pec_event_page_book_quantity",".dpProEventCalendarModal").val();e.post(ProEventCalendarAjax.ajaxurl,{event_date:e("#pec_event_page_book_date",".dpProEventCalendarModal").val(),ticket:e("#pec_event_page_book_ticket",".dpProEventCalendarModal").val(),event_id:s,calendar:e("#pec_event_page_book_calendar",".dpProEventCalendarModal").val(),comment:e("#pec_event_page_book_comment",".dpProEventCalendarModal").val(),quantity:_,name:e("#pec_event_page_book_name",".dpProEventCalendarModal").length?e("#pec_event_page_book_name",".dpProEventCalendarModal").val():"",email:e("#pec_event_page_book_email",".dpProEventCalendarModal").length?e("#pec_event_page_book_email",".dpProEventCalendarModal").val():"",phone:e("#pec_event_page_book_phone",".dpProEventCalendarModal").length?e("#pec_event_page_book_phone",".dpProEventCalendarModal").val():"",pec_payment_discount_id:e("#pec_payment_discount_id",".dpProEventCalendarModal").length?e("#pec_payment_discount_id",".dpProEventCalendarModal").val():"",pec_payment_discount_coupon:e("#pec_payment_discount_coupon",".dpProEventCalendarModal").length?e("#pec_payment_discount_coupon",".dpProEventCalendarModal").val():"",extra_fields:n,return_url:window.location.href,action:"bookEvent",postEventsNonce:ProEventCalendarAjax.postEventsNonce},function(t){t=jQuery.parseJSON(t),e("#pec_event_page_book_comment",".dpProEventCalendarModal").val(""),d.prop("disabled",!1),d.css("opacity",1),""!=t.gateway_screen?(e(".pec_book_select_date",".dpProEventCalendarModal").html(t.gateway_screen),e(".pec_gateway_form select",".dpProEventCalendarModal").selectric()):e(".pec_book_select_date",".dpProEventCalendarModal").html(t.notification)})})})}(jQuery);